<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Consultar Referencias Informes - Guía de Implementación Historia Clínica Digital (HCDSNS) v1.0.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
  	<link rel="stylesheet" href="assets/css/cqf.css"/>
      <!-- Placeholder for child template CSS declarations -->

    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="fhir-logo" href="assets/ico/icon-fhir-144.png"/>
    <link sizes="114x114" rel="fhir-logo" href="assets/ico/icon-fhir-114.png"/>
    <link sizes="72x72" rel="fhir-logo" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script src="assets/js/mermaid.js" type="text/javascript"></script>
    <script src="assets/js/mermaid-init.js" type="text/javascript"></script>
    <style type="text/css">h2{--heading-prefix:"15"}
    h3,h4,h5,h6{--heading-prefix:"15"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->

          <!-- Placeholder for child template header declarations -->

<div>
  <table width="100%">
    <tr>
      <td align="center">
        <img src="assets/images/logoGlobal.png">
      
    
  

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Guía de Implementación Historia Clínica Digital (HCDSNS)</span>
            <br/>
            <span style="display:inline-block;">1.0.0 - R4


            </span>
          </p>
        </div>
         <!-- /container -->
        <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Introducción</a>
  </li>
  <li>
    <a href="toc.html">Listado de Contenidos</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Diagrama de Secuencia
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="diagramaSecPac.html">Busqueda Paciente</a>
      </li>
      <li>
        <a href="diagramaSecInf.html">Recuperar Informe</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Escenarios
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="registrarReferencias.html">Nacional - Registrar Referencias HC</a>
      </li>
      <li>
        <a href="solicitarReferencias.html">Nacional - Consultar Referencias HC</a>
      </li>
      <li>
        <a href="consultarRefInformes.html">Nacional - Consultar Referencias Informes</a>
      </li>
      <li>
        <a href="consultarInforme.html">Nacional - Consultar Informe</a>
      </li>
      <li>
        <a href="altaAlerta.html">Nacional - Registrar Alerta</a>
      </li>
      <li>
        <a href="altaReclamacion.html">Nacional - Alta de Reclamación</a>
      </li>
      <li>
        <a href="solicitarOperacionVisibilidad.html">Nacional - Solicitar Operacion Visibilidad</a>
      </li>
      <li>
        <a href="consultaFlagOculto.html">Nacional - Consultar Flag Oculto</a>
      </li>
      <li>
        <a href="notificacionAccesoModo.html">Nacional - Notificacion Acceso Modo Emergencia</a>
      </li>
      <li>
        <a href="consultaRefInformesEU.html">OpenNCP - Consultar Referencias Informes</a>
      </li>
      <li>
        <a href="consultarInformeEU.html">OpenNCP - Consultar Informes</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Implementación
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="registrarReferenciasCU.html">Nacional - Registrar Referencia HC</a>
      </li>
      <li>
        <a href="solicitarReferenciasCU.html">Nacional - Consultar Referencias HC</a>
      </li>
      <li>
        <a href="consultarRefInformesCU.html">Nacional - Consultar Referencias Informes</a>
      </li>
      <li>
        <a href="consultarInformeCU.html">Nacional - Consultar Informe</a>
      </li>
      <li>
        <a href="altaAlertaCU.html">Nacional - Registrar Alerta</a>
      </li>
      <li>
        <a href="altaReclamacionCU.html">Nacional - Alta de Reclamación</a>
      </li>
      <li>
        <a href="solicitarOperacionVisibilidadCU.html">Nacional - Solicitar Operacion Visibilidad</a>
      </li>
      <li>
        <a href="consultaFlagOcultoCU.html">Nacional - Consultar Flag Oculto</a>
      </li>
      <li>
        <a href="notificacionAccesoModoCU.html">Nacional - Notificacion Acceso Modo Emergencia</a>
      </li>
      <li>
        <a href="consultaRefInformesEUCU.html">OpenNCP - Consultar Referencias Informes</a>
      </li>
      <li>
        <a href="consultarInformeEUCU.html">OpenNCP - Consultar Informe</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Guías Relacionadas
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="https://fhir.ehdsi.eu/laboratory/index.html">MyHealth@Eu Laboratory Report</a>
      </li>
      <li>
        <a href="https://build-fhir.ehdsi.eu/ncp-api/">MyHealth@Eu NCPeH API</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Artefactos
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="recursos.html">Diagramas</a>
      </li>
      <li>
        <a href="artifacts.html">Listado</a>
      </li>
      <li>
        <a href="mapeo.html">Mapeos</a>
      </li>
      <li>
        <a href="terminologias.html">Terminologias</a>
      </li>
      <li>
        <a href="seguridad.html">Seguridad</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Support
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="http://hl7.org/fhir/R4/index.html">FHIR Spec</a>
      </li>
    </ul>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Consultar Referencias Informes</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">Guía de Implementación Historia Clínica Digital (HCDSNS) - Local Development build (v1.0.0) built by the FHIR (HL7&reg; FHIR&reg; Standard) Build Tools. See the <a href="http://example.com/fhir/example/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Consultar Referencias Informes</h2>
  












    <p>  <!-- white space is critical inside of capture --></p>
<div>
  <!-- do not remove - needed to prevent Jekyll from adding a p tag to any non block level element in the markdown. -->
</div>
<p>Este servicio permite la consulta y recuperación de referencias de
documentos clínicos asociados a la historia clínica de un paciente.
Utilizando el recurso FHIR <strong>DocumentReference</strong> para
almacenar y transmitir metadatos sobre los documentos clínicos, este
recurso permite que las Comunidades Autónomas (CCAA) accedan a las
referencias distribuidas de manera centralizada y organizada.</p>
<p>En un escenario típico, cuando una CCAA requiere las referencias de
la historia clínica de un paciente, envía una solicitud al Backend del
SNS. El Backend recibe esta solicitud y realiza una búsqueda en todas
las CCAA conectadas para identificar aquellas que poseen referencias
relevantes para el paciente solicitado. Cada CCAA con información
correspondiente responde con un <strong>Bundle</strong> de
<strong>DocumentReference</strong>, los cuales son recopilados por el
Backend. Posteriormente, el Backend consolida todos estos
<strong>Bundles</strong> en uno solo y lo envía de vuelta a la CCAA
solicitante, proporcionando al profesional de salud una vista unificada
y completa de las referencias de la historia clínica del paciente.</p>
<p><a name="l521">​</a><img src="media/image13.png" alt="A diagram of a document Description automatically generated" style="width:4.88542in;height:2.63542in"/></p>
<h4 id="hcdsns-ca-solicitud-de-referencias-de-documentos-desde-la-comunidad-autónoma">HCDSNS-CA:
Solicitud de Referencias de Documentos desde la Comunidad Autónoma</h4>
<p><strong>Descripción del Escenario:</strong></p>
<p>Desde una CA un profesional necesita acceder a las referencias de
documentos clínicos de un paciente, en este caso informes de laboratorio
con código LOINC: 11502-2, y envía una solicitud al HCDSNS-BE para
obtener estos <strong>DocumentReference</strong>. Luego, HCDSNS-CA se
queda en espera de recibir un <strong>Bundle</strong> con todas las
referencias de documentos clínicos del paciente.</p>
<p>Se enviará una petición por cada uno de los servicios de salud
obtenidos en el paso anterior. Si el servicio de salud destino aún no ha
evolucionado a FHIR, el mensaje se enviará utilizando la mensajería
existente SOAP, en caso contrario, se enviará mensajería FHIR.</p>
<p><strong>Ejemplo:</strong></p>
<p>GET
/DocumentReference?patient=2.16.724.4.40|BBBBBBBBBB009933&amp;type=11502-2&amp;custodian=Organization/20160201&amp;x-flag=0</p>
<p>Authorization: [token]</p>
<h4 id="hcdsns-be-consolidación-de-referencias-de-documentos-por-el-backend">HCDSNS-BE:
Consolidación de Referencias de Documentos por el Backend</h4>
<p><strong>Descripción del Escenario:</strong></p>
<p>HCDSNS_BE recibe un mensaje de la CA peticionaria y envía un mensaje
a la CA destino para recuperar los documentos clínicos de un paciente,
este mensaje incluye un parámetro específico que indica la CA destino de
donde recuperar las referencias de dichos documentos clínicos del
paciente.</p>
<p>El Backend utiliza este parámetro para enviar la petición
exclusivamente a esa comunidad autónoma y devolver las referencias
obtenidas.</p>
<p><strong>Ejemplo:</strong></p>
<p>GET
/DocumentReference?patient=2.16.724.4.40|BBBBBBBBBB009933&amp;type=11502-2&amp;custodian=Organization/20160201&amp;x-flag=0</p>
<p>Authorization: Bearer {token}</p>
<ul>
<li><p><strong>Pasos del Proceso</strong>:</p>
<ol type="1">
<li><p>La <strong>CA</strong> peticionaria envía una solicitud de
referencias de documentos del paciente BBBBBBBBBB009933 a
HCDSNS-BE.</p></li>
<li><p>HCDSNS-BE envía el correspondiente mensaje a la CA indicada en el
parámetro custodian.</p></li>
<li><p>Dicha <strong>CA</strong> responde enviando un bundle de
<strong>DocumentReference</strong> a HCDSNS-BE.</p></li>
<li><p>HCDSNS-BE recibe dicho bundle y lo envía a la <strong>CA</strong>
peticionaria.</p></li>
</ol></li>
</ul>
<h4 id="hcdsns-ca-respuesta-de-la-ca-con-un-bundle-de-referencias">HCDSNS-CA:
Respuesta de la CA con un Bundle de Referencias</h4>
<p><strong>Descripción del Escenario:</strong></p>
<p>Una CA destino recibe una solicitud de referencias de historia
clínica de un paciente desde HCDSNS-BE. La CA reúne la información
disponible en su sistema, monta un bundle con las referencias de
documentos clínicos del paciente y lo envía de vuelta a HCDSNS-BE.</p>
<p><strong>Ejemplo:</strong></p>
<ul>
<li><p><strong>Solicitud de HCDSNS-BE a la CA</strong>:</p></li>
</ul>
<p>GET
/DocumentReference?patient=2.16.724.4.40|BBBBBBBBBB009933&amp;type=11502-2&amp;custodian=Organization/20160201&amp;x-flag=0</p>
<p>Authorization: [token]</p>
<p><strong>Respuesta esperada</strong>:</p>
<table border="1">
<colgroup>
<col style="width: 100%"/>
</colgroup>
<thead>
<tr>
<th><p>{</p>
<p>"resourceType": "Bundle",</p>
<p>"type": "collection",</p>
<p>"entry": [</p>
<p>{</p>
<p>"resource": {</p>
<p>"resourceType": "DocumentReference",</p>
<p>“status”: “current”,</p>
<p>“custodian”: “Organization/20160201”,</p>
<p>"id": "1000000000007",</p>
<p>“date”: “2017-01-01T00:00:00Z”,</p>
<p>"subject": {</p>
<p>"reference": "Patient/BBBBBBBBBB009933",</p>
<p>"display": "Juan Pérez"</p>
<p>},</p>
<p>"content": [</p>
<p>{</p>
<p>"attachment": {</p>
<p>"contentType": "application/pdf",</p>
<p>"url": "/Binary/67890"</p>
<p>},</p>
<p>“format”: “PDF”</p>
<p>},</p>
<p>{</p>
<p>"attachment": {</p>
<p>"contentType": "application/cda",</p>
<p>"url": "/Binary/67891"</p>
<p>},</p>
<p>“format”: “CDA”</p>
<p>}</p>
<p>]</p>
<p>}</p>
<p>}</p>
<p>]</p>
<p>}</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<p><strong>Error:</strong></p>
<ul>
<li><p><strong>Error</strong>: No hay referencias para el paciente
solicitado.</p>
<ul>
<li><p><strong>Respuesta del Servidor</strong>:</p></li>
</ul></li>
</ul>
<table border="1">
<colgroup>
<col style="width: 100%"/>
</colgroup>
<thead>
<tr>
<th><p>{</p>
<p>"resourceType": "OperationOutcome",</p>
<p>"issue": [</p>
<p>{</p>
<p>"severity": "warning",</p>
<p>"code": "not-found",</p>
<p>"details": {</p>
<p>"text": "No se encontraron referencias de historia clínica para el
paciente con ID SNS12345."</p>
<p>}</p>
<p>}</p>
<p>]</p>
<p>}</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<p><strong>Error:</strong></p>
<ul>
<li><p><strong>Error</strong>: No se puede encontrar ninguna referencia
para el paciente solicitado en la CA.</p>
<ul>
<li><p><strong>Respuesta del Servidor</strong>:</p></li>
</ul></li>
</ul>
<table border="1">
<colgroup>
<col style="width: 100%"/>
</colgroup>
<thead>
<tr>
<th><p>{</p>
<p>"resourceType": "OperationOutcome",</p>
<p>"issue": [</p>
<p>{</p>
<p>"severity": "warning",</p>
<p>"code": "not-found",</p>
<p>"details": {</p>
<p>"text": "No se encontraron referencias de historia clínica para el
paciente con ID SNS12345 en esta CA."</p>
<p>}</p>
<p>}</p>
<p>]</p>
<p>}</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>




</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script src="assets/js/window-hash.js" type="text/javascript"> </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &copy; 2024+ <a style="color:var(--footer-hyperlink-text-color)" href="https://sns.gob.es">SNS</a>.  Package hcdsns.sns.implementationGuide#1.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Feb 19, 2025 13:28+0100">2025-02-19</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          </span>
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->

    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard-btn.js" type="text/javascript"> </script>
  <script src="assets/js/anchor-hover.js" type="text/javascript"> </script>
    <!-- Analytics Below
  ================================================== -->
  


</img></td></tr></table></div></div></div></body></html>